(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"7UCR":function(e,r,t){"use strict";t.r(r),t.d(r,"UserModule",function(){return T});var s=t("ofXK"),i=t("tyNb"),n=t("3Pt+"),o=t("SxV6"),c=t("fXoL"),b=t("tk/3");let a=(()=>{class e{constructor(e){this._http=e,this.urlApi="http://localhost:3000/"}getAll(){return this._http.get(this.urlApi+"userslist")}getById(e){return this._http.get(`${this.urlApi}/${e}`)}postCreate(e){return this._http.post(this.urlApi+"userslist",e)}update(e,r){return this._http.put(`${this.urlApi}/${e}`,r)}delete(e){return this._http.delete(`${this.urlApi}/${e}`)}}return e.\u0275fac=function(r){return new(r||e)(c.Qb(b.b))},e.\u0275prov=c.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=t("XNiG"),l=t("pLZG");class u{constructor(e){Object.assign(this,e)}}var f=function(e){return e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e}({});let m=(()=>{class e{constructor(e){this._http=e,this.subject=new d.a,this.defaultid="default-alert"}onAlert(e=this.defaultid){return this.subject.asObservable().pipe(Object(l.a)(r=>r&&r.id===e))}success(e,r){this.alert(new u(Object.assign(Object.assign({},r),{type:f.Success,message:e})))}error(e,r){this.alert(new u(Object.assign(Object.assign({},r),{type:f.Error,message:e})))}info(e,r){this.alert(new u(Object.assign(Object.assign({},r),{type:f.Info,message:e})))}warning(e,r){this.alert(new u(Object.assign(Object.assign({},r),{type:f.Warning,message:e})))}alert(e){e.autoClose=void 0===e.autoClose||e.autoClose,this.subject.next(e)}clear(e=this.defaultid){this.subject.next(new u({id:e}))}}return e.\u0275fac=function(r){return new(r||e)(c.Qb(b.b))},e.\u0275prov=c.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function p(e,r){1&e&&(c.Mb(0,"h2"),c.rc(1,"Add User"),c.Lb())}function h(e,r){1&e&&(c.Mb(0,"h2"),c.rc(1,"Edit User"),c.Lb())}function g(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Title is required"),c.Lb())}function v(e,r){if(1&e&&(c.Mb(0,"div",25),c.qc(1,g,2,0,"div",0),c.Lb()),2&e){const e=c.Xb();c.xb(1),c.ac("ngIf",e.f.title.errors.required)}}function M(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"First Name is required"),c.Lb())}function L(e,r){if(1&e&&(c.Mb(0,"div",25),c.qc(1,M,2,0,"div",0),c.Lb()),2&e){const e=c.Xb();c.xb(1),c.ac("ngIf",e.f.firstName.errors.required)}}function I(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Last Name is required"),c.Lb())}function w(e,r){if(1&e&&(c.Mb(0,"div",25),c.qc(1,I,2,0,"div",0),c.Lb()),2&e){const e=c.Xb();c.xb(1),c.ac("ngIf",e.f.lastName.errors.required)}}function q(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Email is required"),c.Lb())}function x(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Email must be a valid email address"),c.Lb())}function C(e,r){if(1&e&&(c.Mb(0,"div",25),c.qc(1,q,2,0,"div",0),c.qc(2,x,2,0,"div",0),c.Lb()),2&e){const e=c.Xb();c.xb(1),c.ac("ngIf",e.f.email.errors.required),c.xb(1),c.ac("ngIf",e.f.email.errors.email)}}function y(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Role is required"),c.Lb())}function N(e,r){if(1&e&&(c.Mb(0,"div",25),c.qc(1,y,2,0,"div",0),c.Lb()),2&e){const e=c.Xb();c.xb(1),c.ac("ngIf",e.f.role.errors.required)}}function j(e,r){1&e&&(c.Mb(0,"div"),c.Mb(1,"h3",26),c.rc(2,"Change Password"),c.Lb(),c.Mb(3,"p"),c.rc(4,"Leave blank to keep the same password"),c.Lb(),c.Lb())}function A(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Password is required"),c.Lb())}function O(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Password must be at least 6 characters"),c.Lb())}function S(e,r){if(1&e&&(c.Mb(0,"div",25),c.qc(1,A,2,0,"div",0),c.qc(2,O,2,0,"div",0),c.Lb()),2&e){const e=c.Xb();c.xb(1),c.ac("ngIf",e.f.password.errors.required),c.xb(1),c.ac("ngIf",e.f.password.errors.minlength)}}function k(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Confirm Password is required"),c.Lb())}function P(e,r){1&e&&(c.Mb(0,"div"),c.rc(1,"Passwords must match"),c.Lb())}function U(e,r){if(1&e&&(c.Mb(0,"div",25),c.qc(1,k,2,0,"div",0),c.qc(2,P,2,0,"div",0),c.Lb()),2&e){const e=c.Xb();c.xb(1),c.ac("ngIf",e.f.confirmPassword.errors.required),c.xb(1),c.ac("ngIf",e.f.confirmPassword.errors.mustMatch)}}function E(e,r){1&e&&c.Ib(0,"span",27)}const X=function(e){return{"is-invalid":e}};let $=(()=>{class e{constructor(e,r,t,s,i){this.formBuilder=e,this.route=r,this.router=t,this.userService=s,this.alertService=i,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[n.n.minLength(6)];this.isAddMode&&e.push(n.n.required),this.addform=this.formBuilder.group({title:["",n.n.required],firstName:["",n.n.required],lastName:["",n.n.required],email:["",[n.n.required,n.n.email]],role:["",n.n.required],password:["",[n.n.minLength(6),this.isAddMode?n.n.required:n.n.nullValidator]],confirmPassword:["",this.isAddMode?n.n.required:n.n.nullValidator]},{validator:e=>{const r=e.controls.confirmPassword;r.errors&&!r.errors.mustMatch||r.setErrors(e.controls.password.value!==r.value?{mustMatch:!0}:null)}}),this.isAddMode||this.userService.getById(this.id).pipe(Object(o.a)()).subscribe(e=>this.addform.patchValue(e))}get f(){return this.addform.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.addform.invalid||(this.loading=!0,this.isAddMode?this.createUserList():this.updateUser())}createUserList(){this.userService.postCreate(this.addform.value).pipe(Object(o.a)()).subscribe({next:()=>{this.alertService.success("User added",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}updateUser(){this.userService.update(this.id,this.addform.value).pipe(Object(o.a)()).subscribe({next:()=>{this.alertService.success("User updated",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}}return e.\u0275fac=function(r){return new(r||e)(c.Hb(n.b),c.Hb(i.a),c.Hb(i.c),c.Hb(a),c.Hb(m))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-add"]],decls:62,vars:34,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group","col-7"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["formControlName","role",1,"form-control",3,"ngClass"],["value","User"],["value","Admin"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/userslist",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"pt-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,r){1&e&&(c.qc(0,p,2,0,"h2",0),c.qc(1,h,2,0,"h2",0),c.Mb(2,"form",1),c.Tb("ngSubmit",function(){return r.onSubmit()}),c.Mb(3,"div",2),c.Mb(4,"div",3),c.Mb(5,"label"),c.rc(6,"Title"),c.Lb(),c.Mb(7,"select",4),c.Ib(8,"option",5),c.Mb(9,"option",6),c.rc(10,"Mr"),c.Lb(),c.Mb(11,"option",7),c.rc(12,"Mrs"),c.Lb(),c.Mb(13,"option",8),c.rc(14,"Miss"),c.Lb(),c.Mb(15,"option",9),c.rc(16,"Ms"),c.Lb(),c.Lb(),c.qc(17,v,2,1,"div",10),c.Lb(),c.Mb(18,"div",11),c.Mb(19,"label"),c.rc(20,"First Name"),c.Lb(),c.Ib(21,"input",12),c.qc(22,L,2,1,"div",10),c.Lb(),c.Mb(23,"div",11),c.Mb(24,"label"),c.rc(25,"Last Name"),c.Lb(),c.Ib(26,"input",13),c.qc(27,w,2,1,"div",10),c.Lb(),c.Lb(),c.Mb(28,"div",2),c.Mb(29,"div",14),c.Mb(30,"label"),c.rc(31,"Email"),c.Lb(),c.Ib(32,"input",15),c.qc(33,C,3,2,"div",10),c.Lb(),c.Mb(34,"div",3),c.Mb(35,"label"),c.rc(36,"Role"),c.Lb(),c.Mb(37,"select",16),c.Ib(38,"option",5),c.Mb(39,"option",17),c.rc(40,"User"),c.Lb(),c.Mb(41,"option",18),c.rc(42,"Admin"),c.Lb(),c.Lb(),c.qc(43,N,2,1,"div",10),c.Lb(),c.Lb(),c.qc(44,j,5,0,"div",0),c.Mb(45,"div",2),c.Mb(46,"div",3),c.Mb(47,"label"),c.rc(48,"Password"),c.Lb(),c.Ib(49,"input",19),c.qc(50,S,3,2,"div",10),c.Lb(),c.Mb(51,"div",3),c.Mb(52,"label"),c.rc(53,"Confirm Password"),c.Lb(),c.Ib(54,"input",20),c.qc(55,U,3,2,"div",10),c.Lb(),c.Lb(),c.Mb(56,"div",21),c.Mb(57,"button",22),c.qc(58,E,1,0,"span",23),c.rc(59," Save "),c.Lb(),c.Mb(60,"a",24),c.rc(61,"Cancel"),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.ac("ngIf",r.isAddMode),c.xb(1),c.ac("ngIf",!r.isAddMode),c.xb(1),c.ac("formGroup",r.addform),c.xb(5),c.ac("ngClass",c.ec(20,X,r.submitted&&r.f.title.errors)),c.xb(10),c.ac("ngIf",r.submitted&&r.f.title.errors),c.xb(4),c.ac("ngClass",c.ec(22,X,r.submitted&&r.f.firstName.errors)),c.xb(1),c.ac("ngIf",r.submitted&&r.f.firstName.errors),c.xb(4),c.ac("ngClass",c.ec(24,X,r.submitted&&r.f.lastName.errors)),c.xb(1),c.ac("ngIf",r.submitted&&r.f.lastName.errors),c.xb(5),c.ac("ngClass",c.ec(26,X,r.submitted&&r.f.email.errors)),c.xb(1),c.ac("ngIf",r.submitted&&r.f.email.errors),c.xb(4),c.ac("ngClass",c.ec(28,X,r.submitted&&r.f.role.errors)),c.xb(6),c.ac("ngIf",r.submitted&&r.f.role.errors),c.xb(1),c.ac("ngIf",!r.isAddMode),c.xb(5),c.ac("ngClass",c.ec(30,X,r.submitted&&r.f.password.errors)),c.xb(1),c.ac("ngIf",r.submitted&&r.f.password.errors),c.xb(4),c.ac("ngClass",c.ec(32,X,r.submitted&&r.f.confirmPassword.errors)),c.xb(1),c.ac("ngIf",r.submitted&&r.f.confirmPassword.errors),c.xb(2),c.ac("disabled",r.loading),c.xb(1),c.ac("ngIf",r.loading))},directives:[s.j,n.p,n.g,n.d,n.m,n.f,n.c,s.h,n.j,n.o,n.a,i.e],styles:[""]}),e})();function _(e,r){1&e&&c.Ib(0,"span",10)}function B(e,r){1&e&&(c.Mb(0,"span"),c.rc(1,"Delete"),c.Lb())}function D(e,r){if(1&e){const e=c.Nb();c.Mb(0,"tr"),c.Mb(1,"td"),c.rc(2),c.Lb(),c.Mb(3,"td"),c.rc(4),c.Lb(),c.Mb(5,"td"),c.rc(6),c.Lb(),c.Mb(7,"td",6),c.Mb(8,"a",7),c.rc(9,"Edit"),c.Lb(),c.Mb(10,"button",8),c.Tb("click",function(){c.lc(e);const t=r.$implicit;return c.Xb().deleteUser(t.id)}),c.qc(11,_,1,0,"span",9),c.qc(12,B,2,0,"span",5),c.Lb(),c.Lb(),c.Lb()}if(2&e){const e=r.$implicit;c.xb(2),c.vc("",e.title," ",e.firstName," ",e.lastName,""),c.xb(2),c.sc(e.email),c.xb(2),c.sc(e.role),c.xb(2),c.cc("routerLink","edit/",e.id,""),c.xb(2),c.ac("disabled",e.isDeleting),c.xb(1),c.ac("ngIf",e.isDeleting),c.xb(1),c.ac("ngIf",!e.isDeleting)}}function F(e,r){1&e&&(c.Mb(0,"tr"),c.Mb(1,"td",11),c.Ib(2,"span",12),c.Lb(),c.Lb())}const H=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c.Bb({type:e,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"container","white"]],template:function(e,r){1&e&&(c.Mb(0,"section"),c.Mb(1,"article",0),c.Ib(2,"router-outlet"),c.Lb(),c.Lb())},directives:[i.g],styles:[""]}),e})(),children:[{path:"",component:(()=>{class e{constructor(e){this.userService=e,this.users=null}ngOnInit(){this.userService.getAll().pipe(Object(o.a)()).subscribe(e=>this.users=e)}deleteUser(e){this.users.find(r=>r.id===e).isDeleting=!0,this.userService.delete(e).pipe(Object(o.a)()).subscribe(()=>this.users=this.users.filter(r=>r.id!==e))}}return e.\u0275fac=function(r){return new(r||e)(c.Hb(a))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-list"]],decls:17,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,r){1&e&&(c.Mb(0,"h2"),c.rc(1,"Users"),c.Lb(),c.Mb(2,"a",0),c.rc(3,"Add User"),c.Lb(),c.Mb(4,"table",1),c.Mb(5,"thead"),c.Mb(6,"tr"),c.Mb(7,"th",2),c.rc(8,"Name"),c.Lb(),c.Mb(9,"th",2),c.rc(10,"Email"),c.Lb(),c.Mb(11,"th",2),c.rc(12,"Role"),c.Lb(),c.Ib(13,"th",3),c.Lb(),c.Lb(),c.Mb(14,"tbody"),c.qc(15,D,13,9,"tr",4),c.qc(16,F,3,0,"tr",5),c.Lb(),c.Lb()),2&e&&(c.xb(15),c.ac("ngForOf",r.users),c.xb(1),c.ac("ngIf",!r.users))},directives:[i.e,s.i,s.j],styles:["h2[_ngcontent-%COMP%]:after{left:0}"]}),e})()},{path:"add",component:$},{path:"edit/:id",component:$}]}];let R=(()=>{class e{}return e.\u0275mod=c.Fb({type:e}),e.\u0275inj=c.Eb({factory:function(r){return new(r||e)},imports:[[i.f.forChild(H)],i.f]}),e})(),T=(()=>{class e{}return e.\u0275mod=c.Fb({type:e}),e.\u0275inj=c.Eb({factory:function(r){return new(r||e)},imports:[[s.b,R,n.e,n.k],n.e,n.k]}),e})()}}]);